# Deployment & Supabase Setup

## 1. Supabase Setup (Database)
1.  Go to [Supabase.com](https://supabase.com) and create a new project.
2.  Go to **SQL Editor** in the side panel.
3.  Paste and run the following SQL code to create the messages table and secure it:

```sql
-- Create the messages table
create table if not exists public.messages (
  id bigint generated by default as identity primary key,
  created_at timestamp with time zone default timezone('utc'::text, now()) not null,
  name text not null,
  email text not null,
  message text not null
);

-- Enable Row Level Security (RLS)
alter table public.messages enable row level security;

-- Policy 1: Allow anyone (anon) to insert messages
create policy "Enable insert for everyone" 
on public.messages 
for insert 
with check (true);

-- Policy 2: Allow only authenticated users (you) to view messages
-- This prevents the public API from exposing your messages
create policy "Enable read access for authenticated users only" 
on public.messages 
for select 
using (auth.role() = 'authenticated');
```

4.  Go to **Project Settings** -> **API**.
5.  Copy the `Project URL` and `anon` (public) Key.

## 2. Vercel Deployment (Environment Variables)
Since your project handles environment variables (like API keys) safely, you should **NOT** commit your `.env` file to GitHub. Instead, configure them in Vercel.

1.  Push your code to GitHub.
    ```bash
    git add .
    git commit -m "ready for deployment"
    git push origin main
    ```
2.  Log in to [Vercel](https://vercel.com) and import your repository.
3.  **Make sure the Framework Preset is set to Vite**.
4.  In **Environment Variables**, add the following variables:

| Name | Value |
|------|-------|
| `VITE_SUPABASE_URL` | *Your Supabase Project URL* |
| `VITE_SUPABASE_ANON_KEY` | *Your Supabase Anon Key* |
| `VITE_GEMINI_API_KEY` | *Your Google Gemini API Key* |

5.  Click **Deploy**.

**Troubleshooting:**
- If the form says "Failed to send message", check your Browser Console (F12).
- If you see `Supabase client not initialized`, you forgot to add the Environment Variables in Vercel.
- If you see `permission denied`, you didn't run the SQL RLS policies in Step 1.
